document.addEventListener("DOMContentLoaded", function () {
  // Select all labels (Blogger adds them with 'post-labels' class)
  var labelElement = document.querySelector('.post-labels a');

  if (labelElement) {
    // Fetch the first label text
    var firstLabel = labelElement.textContent.trim().toLowerCase();

    // Check if the current URL already has the query parameter
    var currentUrl = window.location.href;
    if (!currentUrl.includes("?topic=")) {
      // Append the topic query parameter dynamically
      var newUrl = currentUrl.split('?')[0] + "?topic=" + encodeURIComponent(firstLabel);

      // Replace URL in browser without reloading
      window.history.replaceState({}, '', newUrl);

      // Trigger a hard reload to apply the change
      window.location.reload(true);
    }
  }
});
